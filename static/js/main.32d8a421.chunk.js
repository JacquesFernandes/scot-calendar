(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{222:function(e,t,n){e.exports=n(401)},401:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(51),i=n.n(r),c=n(409);n(227),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(18),s=n(19),u=n(22),h=n(20),d=n(21),m=n(415),p=n(416),b=n(412),v=n(7),O=n(8),g=n.n(O),k=n(193),f=n.n(k),C=n(414),y=n(410),j=n(413),E=n(130),M=["January","February","March","April","May","June","July","August","September","October","November","December"],S=function(e){function t(e){var n;Object(l.a)(this,t);var a=(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).props.currentMonth;return n.state={currentMonth:M[g.a.isNumber(a)&&a>=0&&a<=11?a:0],isModalOpen:!1},n.handleMonthClick=n.handleMonthClick.bind(Object(v.a)(Object(v.a)(n))),n.setModalState=n.setModalOpenState.bind(Object(v.a)(Object(v.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"setModalOpenState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setState({isModalOpen:e})}},{key:"handleMonthClick",value:function(e,t){var n=this;this.setState({currentMonth:e},function(){n.setModalOpenState(!1),g.a.isFunction(n.props.onMonthUpdate)&&n.props.onMonthUpdate(t)})}},{key:"render",value:function(){var e=this;return o.a.createElement(y.a,{trigger:o.a.createElement(j.a,{content:this.state.currentMonth,size:"large",onClick:function(){return e.setModalOpenState(!0)}}),open:this.state.isModalOpen,closeOnDimmerClick:!0,closeIcon:o.a.createElement(E.a,{name:"close",onClick:function(){return e.setModalOpenState(!1)}})},o.a.createElement(y.a.Header,{content:"Pick a Month"}),o.a.createElement(y.a.Content,null,o.a.createElement(C.a,{stackable:!0,columns:3},o.a.createElement(C.a.Row,null,g.a.map(M,function(t,n){return o.a.createElement(C.a.Column,{style:{marginTop:"0.5em"},key:"month_"+n},o.a.createElement(j.a,{fluid:!0,content:t,disabled:e.state.currentMonth===t,onClick:function(){return e.handleMonthClick(t,n)}}))})))))}}]),t}(o.a.Component),I=n(53),w=n(411),D=n(211),H=n(129),A=n(408),x=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={content:n.props.content},n.onSaveClick=n.onSaveClick.bind(Object(v.a)(Object(v.a)(n))),n.onInputChange=n.onInputChange.bind(Object(v.a)(Object(v.a)(n))),n.onCheckClick=n.onCheckClick.bind(Object(v.a)(Object(v.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t){var n={};this.props.content!==e.content&&(n=Object(I.a)({},n,{content:this.props.content})),g.a.isEmpty(n)||this.setState(n)}},{key:"onSaveClick",value:function(){g.a.isFunction(this.props.onItemSave)&&this.props.onItemSave(this.props.index,g.a.trim(this.state.content))}},{key:"onCheckClick",value:function(){g.a.isFunction(this.props.onItemClear)&&this.props.onItemClear(this.props.index)}},{key:"onInputChange",value:function(e,t){var n=t.value;this.setState({content:n})}},{key:"render",value:function(){return o.a.createElement(w.a.Row,null,o.a.createElement(w.a.Cell,{textAlign:"center"},o.a.createElement(A.a,{autoHeight:!0,value:this.state.content,onChange:this.onInputChange,style:{width:"100%"}})),o.a.createElement(w.a.Cell,{textAlign:"center"},o.a.createElement(j.a.Group,{vertical:!0},o.a.createElement(j.a,{icon:"save",positive:!0,disabled:this.props.content===this.state.content,onClick:this.onSaveClick}),o.a.createElement(j.a,{icon:"delete",negative:!0,onClick:this.onCheckClick}))))}}]),t}(o.a.Component),N=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={content:""},n.onAddClick=n.onAddClick.bind(Object(v.a)(Object(v.a)(n))),n.onInputChange=n.onInputChange.bind(Object(v.a)(Object(v.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"onAddClick",value:function(){g.a.isFunction(this.props.onItemAdd)&&(this.props.onItemAdd(g.a.trim(this.state.content)),this.setState({content:""}))}},{key:"onInputChange",value:function(e,t){var n=t.value;this.setState({content:n})}},{key:"render",value:function(){var e=g.a.trim(this.state.content).length>0;return o.a.createElement(w.a.Row,{positive:!0},o.a.createElement(w.a.Cell,{textAlign:"center"},o.a.createElement(A.a,{autoHeight:!0,value:this.state.content,onChange:this.onInputChange,style:{width:"100%"}})),o.a.createElement(w.a.Cell,{textAlign:"center",collapsing:!0},o.a.createElement(j.a.Group,{vertical:!0},o.a.createElement(j.a,{icon:"plus",positive:e,disabled:!e,onClick:this.onAddClick}))))}}]),t}(o.a.Component);function R(e){var t=new RegExp("^[0-9]{1,2}/[0-9]{1,2}$");if(g.a.isDate(e)){var n=e.getDate(),a=e.getMonth();return"".concat(n,"/").concat(a)}return g.a.isString(e)&&t.test(e)?e:null}function F(e){var t=R(e);if(t){var n=sessionStorage.getItem(t);return n?JSON.parse(n):[]}return[]}var W=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={isModalOpen:!1,modalItems:F(n.props.date)||[]},n.handleClick=n.handleClick.bind(Object(v.a)(Object(v.a)(n))),n.handleCloseClick=n.handleCloseClick.bind(Object(v.a)(Object(v.a)(n))),n.generateModalItem=n.generateModalItem.bind(Object(v.a)(Object(v.a)(n))),n.getModalFormattedDateString=n.getModalFormattedDateString.bind(Object(v.a)(Object(v.a)(n))),n.onItemAdd=n.onItemAdd.bind(Object(v.a)(Object(v.a)(n))),n.onItemSave=n.onItemSave.bind(Object(v.a)(Object(v.a)(n))),n.onItemClear=n.onItemClear.bind(Object(v.a)(Object(v.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e){var t={};e.date!==this.props.date&&(t=Object(I.a)({},t,{modalItems:F(this.props.date)})),g.a.isEmpty(t)||this.setState(t)}},{key:"handleClick",value:function(e,t){this.setState({isModalOpen:!0,modalItems:F(this.props.date)})}},{key:"handleCloseClick",value:function(){this.setState({isModalOpen:!1})}},{key:"getModalFormattedDateString",value:function(){var e=this.props.date;if(e){var t=e.getDate();t=t>=10?String(t):"0"+t;var n=e.getMonth()+1;return t+"/"+(n=n>=10?String(n):"0"+n)+"/"+String(e.getFullYear())}return"Someday~!"}},{key:"generateHolidayLabel",value:function(){return this.props.holiday?o.a.createElement(H.a,{content:"Holiday",detail:this.props.holiday.name,size:"large",color:"green",icon:"heart"}):this.props.nextHoliday?o.a.createElement(H.a,{content:"Next Holiday",detail:this.props.nextHoliday.name+" ("+this.props.nextHoliday.date+"/"+this.props.nextHoliday.month+")",size:"large",color:"blue",icon:"heart outline"}):o.a.createElement(H.a,{content:"No Upcoming Holidays This Month",size:"large"})}},{key:"onItemAdd",value:function(e){!function(e,t){var n=R(e);if(n){var a=F(e);a&&g.a.isArray(a)?(a.push(t),sessionStorage.setItem(n,JSON.stringify(a))):sessionStorage.setItem(n,JSON.stringify([t]))}}(this.props.date,e),this.setState({modalItems:[].concat(Object(D.a)(this.state.modalItems),[e])})}},{key:"onItemSave",value:function(e,t){!function(e,t,n){var a=F(e);a[t]=n,sessionStorage.setItem(R(e),JSON.stringify(a))}(this.props.date,e,t),this.setState({modalItems:F(this.props.date)})}},{key:"onItemClear",value:function(e){!function(e,t){var n=F(e),a=g.a.filter(n,function(e,n){return t!==n});sessionStorage.setItem(R(e),JSON.stringify(a))}(this.props.date,e),this.setState({modalItems:F(this.props.date)})}},{key:"generateModalItem",value:function(e,t){return o.a.createElement(x,{key:"DI_"+t,index:t,content:this.state.modalItems[t],onItemSave:this.onItemSave,onItemClear:this.onItemClear})}},{key:"render",value:function(){return o.a.createElement(y.a,{trigger:o.a.createElement(w.a.Cell,{style:{marginTop:"0.5em",cursor:this.props.date?"pointer":null},onClick:this.props.date?this.handleClick:null,active:!g.a.isEmpty(this.props.holiday)||!g.a.isEmpty(this.state.modalItems)},this.props.date?this.props.date.getDate():null),closeIcon:o.a.createElement(E.a,{name:"close",onClick:this.handleCloseClick}),open:this.state.isModalOpen,closeOnDimmerClick:!0},o.a.createElement(y.a.Header,{content:this.getModalFormattedDateString()}),o.a.createElement(y.a.Content,null,this.generateHolidayLabel()),o.a.createElement(w.a,{unstackable:!0},o.a.createElement(w.a.Body,null,g.a.map(this.state.modalItems,this.generateModalItem),o.a.createElement(N,{onItemAdd:this.onItemAdd}))))}}]),t}(o.a.Component),U=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={currentMonth:n.props.currentMonth,weeks:n.generateCalendarWeeks(n.props.currentMonth)},n.generateCalendarWeeks=n.generateCalendarWeeks.bind(Object(v.a)(Object(v.a)(n))),n.generateWeekRow=n.generateWeekRow.bind(Object(v.a)(Object(v.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){var e={};this.state.currentMonth!==this.props.currentMonth&&(e=Object(I.a)({},e,{currentMonth:this.props.currentMonth,weeks:this.generateCalendarWeeks(this.props.currentMonth)})),g.a.isEmpty(e)||this.setState(e)}},{key:"generateCalendarWeeks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.currentMonth,t=new Date;t.setMonth(e,1);for(var n=[];t.getMonth()===this.props.currentMonth;)n.push(new Date(t)),t.setDate(t.getDate()+1);var a=[],o=0;for(g.a.forEach(n,function(e){g.a.isArray(a[o])?a[o].push(e):a[o]=[e],6===e.getDay()&&o++});a[0].length<7;)a[0].unshift(null);for(;a[a.length-1].length<7;)a[a.length-1].push(null);return a}},{key:"generateWeekRow",value:function(e,t){var n=this.props.holidays;function a(e){var t=null;return g.a.forEach(n,function(n){n.date>e.getDate()&&null===t&&(t=n)}),t}return o.a.createElement(w.a.Row,{key:"week_"+t},g.a.map(e,function(e,t){return e?o.a.createElement(W,{holiday:g.a.find(n,{date:e.getDate()}),nextHoliday:a(e),date:e,key:"date_"+t}):o.a.createElement(W,{date:null,key:"date_"+t})}))}},{key:"render",value:function(){return o.a.createElement(w.a,{celled:!0,unstackable:!0,textAlign:"center"},o.a.createElement(w.a.Header,null,o.a.createElement(w.a.Row,null,o.a.createElement(w.a.HeaderCell,{content:"S"}),o.a.createElement(w.a.HeaderCell,{content:"M"}),o.a.createElement(w.a.HeaderCell,{content:"T"}),o.a.createElement(w.a.HeaderCell,{content:"W"}),o.a.createElement(w.a.HeaderCell,{content:"T"}),o.a.createElement(w.a.HeaderCell,{content:"F"}),o.a.createElement(w.a.HeaderCell,{content:"S"}))),o.a.createElement(w.a.Body,null,g.a.map(this.state.weeks,this.generateWeekRow)))}}]),t}(o.a.Component),J=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={currentMonthNumber:(new Date).getMonth(),currentMonthHolidays:[],holidays:[]},n.handleMonthUpdate=n.handleMonthUpdate.bind(Object(v.a)(Object(v.a)(n))),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.a.get("https://www.gov.uk/bank-holidays.json").then(function(t){var n=t.data,a=(new Date).getFullYear(),o=g.a.filter(n.scotland.events,function(e){return g.a.includes(e.date,a)}),r=g.a.map(o,function(e){var t=new Date(e.date);return{name:e.title,month:t.getMonth(),date:t.getDate()}});e.setState({holidays:r,currentMonthHolidays:g.a.filter(r,function(t){return t.month===e.state.currentMonthNumber})})}).catch(function(e){console.error("ERROR:",e)})}},{key:"handleMonthUpdate",value:function(e){g.a.isNumber(e)&&e>=0&&e<=11&&this.setState({currentMonthNumber:e,currentMonthHolidays:g.a.filter(this.state.holidays,function(t){return t.month===e})})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(C.a,null,o.a.createElement(C.a.Row,{columns:1,centered:!0},o.a.createElement(S,{currentMonth:this.state.currentMonthNumber,onMonthUpdate:this.handleMonthUpdate})),o.a.createElement(C.a.Row,{columns:1,centered:!0},o.a.createElement(C.a.Column,null,o.a.createElement(U,{currentMonth:this.state.currentMonthNumber,holidays:this.state.currentMonthHolidays})))))}}]),t}(o.a.Component),T=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null)}}]),t}(o.a.Component),_=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,"Sorry, this path was not found...")}}]),t}(o.a.Component),z=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{style:{margin:"0.5em"}},o.a.createElement(b.a,{fluid:!0},o.a.createElement(b.a.Content,null,o.a.createElement(b.a.Header,{content:"CalEdit"})),o.a.createElement(b.a.Content,null,o.a.createElement(m.a,null,o.a.createElement(p.a,{exact:!0,path:"/",component:J}),o.a.createElement(p.a,{exact:!0,path:"/edit",component:T}),o.a.createElement(p.a,{component:_})))))}}]),t}(o.a.Component);i.a.render(o.a.createElement(c.a,{basename:"/scot-calendar"},o.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[222,2,1]]]);
//# sourceMappingURL=main.32d8a421.chunk.js.map